FROM "nvidia/cuda:12.5.1-devel-ubuntu24.04" as base
LABEL type=diffrg-image

# set a directory for the app
WORKDIR /
ARG DEBIAN_FRONTEND=noninteractive

COPY ../deploy.sh /deploy.sh

# install dependencies
RUN apt-get -y update
RUN apt-get -y install git cmake libopenblas-dev build-essential python3 doxygen graphviz libgsl-dev libomp-dev libopenmpi-dev flex
# install DiFfRG
RUN bash deploy.sh

