FROM "rockylinux:9.3" as base

# set a directory for the app
WORKDIR /

COPY ../deploy.sh /deploy.sh

# install dependencies
#RUN cat /etc/yum.repos.d/rocky-devel.repo; exit -1
# enable the devel repo
RUN sed 's/#baseurl/baseurl/g' -i /etc/yum.repos.d/rocky-devel.repo
RUN dnf --enablerepo=devel install -y gcc-toolset-12 cmake git openblas-devel doxygen doxygen-latex python3 python3-pip gsl-devel
SHELL [ "/usr/bin/scl", "enable", "gcc-toolset-12"]
RUN bash deploy.sh
